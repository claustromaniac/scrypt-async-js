function scrypt(t,r,n,e,o,f,i,u){"use strict";function s(r){var y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],w=1779033703,d=3144134277,m=1013904242,A=2773480762,N=1359893119,E=2600822924,b=528734635,I=1541459225,j=new Array(64);function n(r){for(var n=0,t=r.length;64<=t;){var o,e,f,i,u,a=w,s=d,h=m,c=A,p=N,l=E,v=b,g=I;for(e=0;e<16;e++)f=n+4*e,j[e]=(255&r[f])<<24|(255&r[f+1])<<16|(255&r[f+2])<<8|255&r[f+3];for(e=16;e<64;e++)i=((o=j[e-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,u=((o=j[e-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,j[e]=(i+j[e-7]|0)+(u+j[e-16]|0)|0;for(e=0;e<64;e++)i=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&l^~p&v)|0)+(g+(y[e]+j[e]|0)|0)|0,u=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&s^a&h^s&h)|0,g=v,v=l,l=p,p=c+i|0,c=h,h=s,s=a,a=i+u|0;w=w+a|0,d=d+s|0,m=m+h|0,A=A+c|0,N=N+p|0,E=E+l|0,b=b+v|0,I=I+g|0,n+=64,t-=64}}n(r);var t,o=r.length%64,e=r.length/536870912|0,f=r.length<<3,i=o<56?56:120,u=r.slice(r.length-o,r.length);for(u.push(128),t=o+1;t<i;t++)u.push(0);return u.push(e>>>24&255),u.push(e>>>16&255),u.push(e>>>8&255),u.push(e>>>0&255),u.push(f>>>24&255),u.push(f>>>16&255),u.push(f>>>8&255),u.push(f>>>0&255),n(u),[w>>>24&255,w>>>16&255,w>>>8&255,w>>>0&255,d>>>24&255,d>>>16&255,d>>>8&255,d>>>0&255,m>>>24&255,m>>>16&255,m>>>8&255,m>>>0&255,A>>>24&255,A>>>16&255,A>>>8&255,A>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,b>>>24&255,b>>>16&255,b>>>8&255,b>>>0&255,I>>>24&255,I>>>16&255,I>>>8&255,I>>>0&255]}function a(r,n,t){64<r.length&&(r=s(r.push?r:Array.prototype.slice.call(r,0)));var o,e=64+n.length+4,f=new Array(e),i=new Array(64),u=[];for(o=0;o<64;o++)f[o]=54;for(o=0;o<r.length;o++)f[o]^=r[o];for(o=0;o<n.length;o++)f[64+o]=n[o];for(o=e-4;o<e;o++)f[o]=0;for(o=0;o<64;o++)i[o]=92;for(o=0;o<r.length;o++)i[o]^=r[o];function a(){for(var r=e-1;e-4<=r;r--){if(f[r]++,f[r]<=255)return;f[r]=0}}for(;32<=t;)a(),u=u.concat(s(i.concat(s(f)))),t-=32;return 0<t&&(a(),u=u.concat(s(i.concat(s(f))).slice(0,t))),u}function h(r,n,t,o){var e,f,i=r[0]^n[t++],u=r[1]^n[t++],a=r[2]^n[t++],s=r[3]^n[t++],h=r[4]^n[t++],c=r[5]^n[t++],p=r[6]^n[t++],l=r[7]^n[t++],v=r[8]^n[t++],g=r[9]^n[t++],y=r[10]^n[t++],w=r[11]^n[t++],d=r[12]^n[t++],m=r[13]^n[t++],A=r[14]^n[t++],N=r[15]^n[t++],E=i,b=u,I=a,j=s,x=h,C=c,L=p,M=l,k=v,S=g,T=y,U=w,q=d,z=m,B=A,D=N;for(f=0;f<8;f+=2)E^=(e=(q^=(e=(k^=(e=(x^=(e=E+q)<<7|e>>>25)+E)<<9|e>>>23)+x)<<13|e>>>19)+k)<<18|e>>>14,C^=(e=(b^=(e=(z^=(e=(S^=(e=C+b)<<7|e>>>25)+C)<<9|e>>>23)+S)<<13|e>>>19)+z)<<18|e>>>14,T^=(e=(L^=(e=(I^=(e=(B^=(e=T+L)<<7|e>>>25)+T)<<9|e>>>23)+B)<<13|e>>>19)+I)<<18|e>>>14,D^=(e=(U^=(e=(M^=(e=(j^=(e=D+U)<<7|e>>>25)+D)<<9|e>>>23)+j)<<13|e>>>19)+M)<<18|e>>>14,E^=(e=(j^=(e=(I^=(e=(b^=(e=E+j)<<7|e>>>25)+E)<<9|e>>>23)+b)<<13|e>>>19)+I)<<18|e>>>14,C^=(e=(x^=(e=(M^=(e=(L^=(e=C+x)<<7|e>>>25)+C)<<9|e>>>23)+L)<<13|e>>>19)+M)<<18|e>>>14,T^=(e=(S^=(e=(k^=(e=(U^=(e=T+S)<<7|e>>>25)+T)<<9|e>>>23)+U)<<13|e>>>19)+k)<<18|e>>>14,D^=(e=(B^=(e=(z^=(e=(q^=(e=D+B)<<7|e>>>25)+D)<<9|e>>>23)+q)<<13|e>>>19)+z)<<18|e>>>14;n[o++]=r[0]=E+i|0,n[o++]=r[1]=b+u|0,n[o++]=r[2]=I+a|0,n[o++]=r[3]=j+s|0,n[o++]=r[4]=x+h|0,n[o++]=r[5]=C+c|0,n[o++]=r[6]=L+p|0,n[o++]=r[7]=M+l|0,n[o++]=r[8]=k+v|0,n[o++]=r[9]=S+g|0,n[o++]=r[10]=T+y|0,n[o++]=r[11]=U+w|0,n[o++]=r[12]=q+d|0,n[o++]=r[13]=z+m|0,n[o++]=r[14]=B+A|0,n[o++]=r[15]=D+N|0}function c(r,n,t,o,e){for(;e--;)r[n++]=t[o++]}function p(r,n,t,o,e){for(;e--;)r[n++]^=t[o++]}function l(r,n,t,o,e){c(r,0,n,t+16*(2*e-1),16);for(var f=0;f<2*e;f+=2)h(r,n,t+16*f,o+8*f),h(r,n,t+16*f+16,o+8*f+16*e)}function v(r,n,t){return r[n+16*(2*t-1)]}function g(r){for(var n=[],t=0;t<r.length;t++){var o=r.charCodeAt(t);if(o<128)n.push(o);else if(o<2048)n.push(192|o>>6),n.push(128|63&o);else if(o<55296)n.push(224|o>>12),n.push(128|o>>6&63),n.push(128|63&o);else{if(t>=r.length-1)throw new Error("invalid string");t++,o=(1023&o)<<10,o|=1023&r.charCodeAt(t),o+=65536,n.push(240|o>>18),n.push(128|o>>12&63),n.push(128|o>>6&63),n.push(128|63&o)}}return n}var y=-1>>>0,w=1;if("object"==typeof n){if(4<arguments.length)throw new Error("scrypt: incorrect number of arguments");var d=n;if(i=e,void 0===(n=d.logN)){if(void 0===d.N)throw new Error("scrypt: missing N parameter");if(d.N<2||d.N>y)throw new Error("scrypt: N is out of range");if(0!=(d.N&d.N-1))throw new Error("scrypt: N is not a power of 2");n=Math.log(d.N)/Math.LN2}w=d.p||1,e=d.r,o=d.dkLen||32,f=d.interruptStep||0,u=d.encoding}if(w<1)throw new Error("scrypt: invalid p");if(e<=0)throw new Error("scrypt: invalid r");if(n<1||31<n)throw new Error("scrypt: logN must be between 1 and 31");var m,A,N,E,b=1<<n>>>0;if(1<<30<=e*w||y/128/w<e||y/256<e||y/128/e<b)throw new Error("scrypt: parameters are too large");"string"==typeof t&&(t=g(t)),"string"==typeof r&&(r=g(r)),E="undefined"!=typeof Int32Array?(m=new Int32Array(64*e),A=new Int32Array(32*b*e),new Int32Array(16)):(m=[],A=[],new Array(16)),N=a(t,r,128*w*e);var I=0,j=32*e;function x(r){for(var n=0;n<32*e;n++){var t=r+4*n;m[I+n]=(255&N[t+3])<<24|(255&N[t+2])<<16|(255&N[t+1])<<8|(255&N[t+0])<<0}}function C(r,n){for(var t=r;t<n;t+=2)c(A,t*(32*e),m,I,32*e),l(E,m,I,j,e),c(A,(t+1)*(32*e),m,j,32*e),l(E,m,j,I,e)}function L(r,n){for(var t=r;t<n;t+=2){var o=v(m,I,e)&b-1;p(m,I,A,o*(32*e),32*e),l(E,m,I,j,e),o=v(m,j,e)&b-1,p(m,j,A,o*(32*e),32*e),l(E,m,j,I,e)}}function M(r){for(var n=0;n<32*e;n++){var t=m[I+n];N[r+4*n+0]=t>>>0&255,N[r+4*n+1]=t>>>8&255,N[r+4*n+2]=t>>>16&255,N[r+4*n+3]=t>>>24&255}}var k="undefined"!=typeof setImmediate?setImmediate:setTimeout;function S(n,t,o,e,f){!function r(){k(function(){e(n,n+o<t?n+o:t),(n+=o)<t?r():f()})}()}function T(r){var n=a(t,N,o);return"base64"===r?function(r){for(var n,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),o=r.length,e=[],f=0;f<o;)n=((f<o?r[f++]:0)<<16)+((f<o?r[f++]:0)<<8)+(f<o?r[f++]:0),e.push(t[n>>>18&63]),e.push(t[n>>>12&63]),e.push(t[n>>>6&63]),e.push(t[n>>>0&63]);return 0<o%3&&(e[e.length-1]="=",o%3==1&&(e[e.length-2]="=")),e.join("")}(n):"hex"===r?function(r){for(var n="0123456789abcdef".split(""),t=r.length,o=[],e=0;e<t;e++)o.push(n[r[e]>>>4&15]),o.push(n[r[e]>>>0&15]);return o.join("")}(n):"binary"===r?new Uint8Array(n):n}"function"==typeof f&&(u=i,i=f,f=1e3),f<=0?function(){for(var r=0;r<w;r++)x(128*r*e),C(0,b),L(0,b),M(128*r*e);i(T(u))}():function r(n){x(128*n*e),S(0,b,2*f,C,function(){S(0,b,2*f,L,function(){M(128*n*e),n+1<w?k(function(){r(n+1)}):i(T(u))})})}(0)}"undefined"!=typeof module&&(module.exports=scrypt);